import{r as s,j as e,d as u,f as t,B as j,A as g,P as f,l as b,m as D,n as y,o as i,p as a,q as T,s as w,h as l}from"./mui-Czmlt3Wi.js";import{a as N}from"./index-xsH4HHeE.js";import{A as m}from"./api-C-m1HPol.js";import"./vendor-DJG_os-6.js";function B(){const[c,n]=s.useState([]),[d,p]=s.useState(!0),[x,o]=s.useState("");s.useEffect(()=>{h()},[]);const h=async()=>{try{const r=await N.get(`${m}/documentos/pendentes`);Array.isArray(r.data)?(n(r.data),o("")):(o("Erro no formato da resposta do servidor"),n([]))}catch{o("Erro ao carregar documentos"),n([])}finally{p(!1)}},E=r=>{switch(r){case"APROVADO":return"success";case"REJEITADO":return"error";case"PENDENTE":return"warning";default:return"default"}},v=r=>{switch(r){case"APROVADO":return"Aprovado";case"REJEITADO":return"Rejeitado";case"PENDENTE":return"Pendente";default:return r}},A=r=>{window.open(`/aprovacao/${r}`,"_blank")};return d?e.jsx(u,{maxWidth:"lg",sx:{mt:4},children:e.jsx(t,{variant:"h4",gutterBottom:!0,children:"Carregando..."})}):e.jsxs(u,{maxWidth:"lg",sx:{mt:4},children:[e.jsxs(j,{sx:{mb:4},children:[e.jsx(t,{variant:"h4",gutterBottom:!0,children:"Lista de Documentos para AprovaÃ§Ã£o"}),e.jsx(t,{variant:"body1",color:"text.secondary",children:"Documentos enviados pelos despachantes aguardando aprovaÃ§Ã£o"})]}),x&&e.jsx(g,{severity:"error",sx:{mb:2},children:x}),e.jsx(f,{sx:{width:"100%",overflow:"hidden"},children:e.jsx(b,{children:e.jsxs(D,{children:[e.jsx(y,{children:e.jsxs(i,{children:[e.jsx(a,{children:"ID"}),e.jsx(a,{children:"Motorista"}),e.jsx(a,{children:"Empresa"}),e.jsx(a,{children:"Data Envio"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Arquivo"}),e.jsx(a,{children:"AÃ§Ãµes"})]})}),e.jsx(T,{children:c.length===0?e.jsx(i,{children:e.jsx(a,{colSpan:7,align:"center",children:e.jsx(t,{variant:"body1",color:"text.secondary",sx:{py:4},children:"Nenhum documento encontrado"})})}):c.map(r=>e.jsxs(i,{children:[e.jsx(a,{children:r.id}),e.jsx(a,{children:r.nomeMotorista}),e.jsx(a,{children:r.empresa?.razaoSocial||"N/A"}),e.jsx(a,{children:new Date(r.dataEnvio).toLocaleDateString("pt-BR")}),e.jsx(a,{children:e.jsx(w,{label:v(r.status),color:E(r.status),size:"small"})}),e.jsx(a,{children:e.jsx(l,{variant:"text",size:"small",onClick:()=>{window.open(`${m}/documentos/${r.id}/arquivo`,"_blank")},color:"primary",children:"ðŸ“Ž Ver Arquivo"})}),e.jsx(a,{children:e.jsx(l,{variant:"contained",size:"small",onClick:()=>A(r.tokenAprovacao),disabled:r.status!=="PENDENTE",children:r.status==="PENDENTE"?"Revisar":"Visualizar"})})]},r.id))})]})})}),e.jsx(j,{sx:{mt:2},children:e.jsx(l,{variant:"outlined",onClick:h,disabled:d,children:"Atualizar Lista"})})]})}export{B as default};
